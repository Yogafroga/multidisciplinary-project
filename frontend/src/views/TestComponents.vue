<template>
  <div class="component-test-view">
    <h1 class="text-h1">üß™ –¢–µ—Å—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h1>

    <section>
      <h2 class="text-h2">1. HeaderBar ‚Äî –®–∞–ø–∫–∞</h2>
      <HeaderBar email="user@farm.com" />
    </section>

    <section>
      <h2 class="text-h2">2. TabBar ‚Äî –í–∫–ª–∞–¥–∫–∏</h2>
      <div class="tab-examples">
        <TabBar variant="animals" />
        <TabBar variant="small" />
        <TabBar variant="export" />
        <TabBar variant="export-small" />
      </div>
    </section>

    <section>
      <h2 class="text-h2">3. AppInput ‚Äî –ü–æ–ª—è –≤–≤–æ–¥–∞</h2>
      <div class="input-examples">
        <AppInput v-model="inputText" placeholder="–û–±—ã—á–Ω—ã–π –∏–Ω–ø—É—Ç" />
        <AppInput v-model="inputPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
        <AppInput
            v-model="dateRange"
            type="daterange"
            placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥"
            variant="calendar-green"
        />
        <AppInput
            v-model="inputError"
            placeholder="–° –æ—à–∏–±–∫–æ–π"
            error="–ü–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"
        />
      </div>
    </section>

    <section>
      <h2 class="text-h2">4. AppButton ‚Äî –ö–Ω–æ–ø–∫–∏</h2>
      <div class="button-examples">
        <AppButton>–û–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞</AppButton>
        <AppButton variant="upload">–ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</AppButton>
        <AppButton loading>–ó–∞–≥—Ä—É–∑–∫–∞...</AppButton>
        <AppButton disabled>–û—Ç–∫–ª—é—á–µ–Ω–∞</AppButton>
      </div>
    </section>

    <section>
      <h2 class="text-h2">5. AppLabel ‚Äî –ú–µ—Ç–∫–∏</h2>
      <div class="label-examples">
        <AppLabel forId="input1">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</AppLabel>
        <AppLabel forId="input2" required>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</AppLabel>
      </div>
    </section>

    <section>
      <h2 class="text-h2">6. FileItem ‚Äî –§–∞–π–ª—ã</h2>
      <div class="file-examples">
        <FileItem :file="{ name: 'report.pdf', loaded: 2_500_000, total: 5_000_000 }" />
        <FileItem :file="{ name: 'photo.jpg', loaded: 5_000_000, total: 5_000_000 }" />
        <FileItem :file="{ name: 'data.raw', loaded: 1_000_000, total: 5_000_000 }" />
      </div>
    </section>

    <!-- === DRAG & DROP: –†–ï–ñ–ò–ú 1 ‚Äî –§–û–¢–û === -->
    <section>
      <h2 class="text-h2">7. DragDropUpload ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ</h2>
      <DragAndDrop variant="image" />
    </section>

    <!-- === DRAG & DROP: –†–ï–ñ–ò–ú 2 ‚Äî –ê–†–•–ò–í === -->
    <section>
      <h2 class="text-h2">8. DragDropUpload ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞</h2>
      <DragAndDrop variant="archive" />
    </section>

    <!-- === –¢–ï–°–¢: –î–ê–ù–ù–´–ï –ò–ó –°–¢–û–†–ê === -->
    <section>
      <h2 class="text-h2">9. –î–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–æ—Ä–∞ `useCowsStore`</h2>
      <div class="store-preview">
        <p class="text-h5">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: <strong>{{ cowsStore.history.data.length }}</strong></p>

        <div v-if="cowsStore.history.data.length === 0" class="empty">
          –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        </div>
        <ul v-else class="history-list">
          <li v-for="item in cowsStore.history.data" :key="item.id" class="history-item">
            üêÑ <strong>–ö–æ—Ä–æ–≤–∞ {{ item.animal_id }}</strong> ‚Äî {{ item.weight }} –∫–≥,
            {{ new Date(item.created_at).toLocaleString() }}
          </li>
        </ul>
      </div>
    </section>
  </div>
</template>

<script setup>
import HeaderBar from '../components/ui/head.vue';
import TabBar from '../components/ui/tabBar.vue';
import AppInput from '../components/ui/input.vue';
import AppButton from '../components/ui/button.vue';
import AppLabel from '../components/ui/label.vue';
import FileItem from '../components/ui/fileItem.vue';
import DragAndDrop from '../components/ui/DragDropUpload.vue';

// üîπ –ò–º–ø–æ—Ä—Ç —Å—Ç–æ—Ä–∞
import { useCowsStore } from '../stores/cows.js';

const cowsStore = useCowsStore();

// –î–ª—è —Ç–µ—Å—Ç–∞ –∏–Ω–ø—É—Ç–æ–≤
import { ref } from 'vue';
const inputText = ref('');
const inputPassword = ref('');
const dateRange = ref([]);
const inputError = ref('');
</script>

<style scoped lang="scss">
.component-test-view {
  padding: 32px;
  max-width: 1000px;
  margin: 0 auto;
  font-family: 'Inter', sans-serif;
}

section {
  margin-bottom: 48px;
}

h2 {
  margin-bottom: 16px;
}

.tab-examples,
.input-examples,
.button-examples,
.label-examples,
.file-examples {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.file-examples {
  align-items: flex-start;
}

/* === –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–æ—Ä–∞ === */
.store-preview {
  padding: 16px;
  background: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 8px;
  font-size: 14px;
}

.history-list {
  list-style: none;
  padding: 0;
  margin-top: 10px;
}

.history-item {
  padding: 8px 12px;
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  margin-bottom: 8px;
  font-size: 13px;
  color: #271f12;
}

.empty {
  color: #999;
  font-style: italic;
  padding: 10px 0;
}
</style>